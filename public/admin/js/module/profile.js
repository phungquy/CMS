window.onload=function(){var e,t=window.Cropper,n=document.getElementById("dataX"),a=document.getElementById("dataY"),o=document.getElementById("dataHeight"),i=document.getElementById("dataWidth"),l={aspectRatio:1,preview:".img-preview",crop:function(e){n.value=Math.round(e.detail.x),a.value=Math.round(e.detail.y),o.value=Math.round(e.detail.height),i.value=Math.round(e.detail.width)}},d=new t(image,l),c=document.getElementById("inputImage"),r=window.URL||window.webkitURL;r?c.onchange=function(){var t=this.files;d&&t&&t.length&&(file=t[0],/^image\/\w+/.test(file.type)?(e=r.createObjectURL(file),d.reset().replace(e),c.value=null):window.alert("Please choose an image file."))}:(c.disabled=!0,c.parentNode.className+=" disabled"),document.getElementById("send-server").addEventListener("click",function(){var e=document.getElementById("token").value,t=document.getElementById("id-user").value,n=d.getCroppedCanvas();if(null!=n){var a=n.toDataURL(),o=configs.admin_site+"user/ajaxChangeAvatar/"+t;$.ajax({type:"post",data:{csrf_admin_thy:e,dataURL:a},url:o,success:function(e){1==e?swal({title:complete,text:done+update+avatar+success,type:"success",confirmButtonColor:"#5cb85c",confirmButtonText:"OK",closeOnConfirm:!1},function(e){location.reload()}):swal({title:notcomplete,text:retry,type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"OK",closeOnConfirm:!1},function(e){location.reload()})}})}else swal(notcomplete,inputimg,"error")})};